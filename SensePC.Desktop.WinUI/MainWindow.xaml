<Window
    x:Class="SensePC.Desktop.WinUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="SensePC">

    <Grid x:Name="RootGrid">
        <!-- Login Frame (when NOT authenticated) -->
        <Frame x:Name="LoginFrame" Visibility="Visible" />
        
        <!-- Dashboard Layout with NavigationView (when authenticated) -->
        <NavigationView x:Name="NavView" 
                        Visibility="Collapsed"
                        IsBackButtonVisible="Collapsed"
                        IsSettingsVisible="False"
                        IsPaneToggleButtonVisible="False"
                        PaneDisplayMode="Left"
                        OpenPaneLength="260"
                        SelectionChanged="NavView_SelectionChanged"
                        Loaded="NavView_Loaded">
            
            <!-- Navigation Header -->
            <NavigationView.PaneHeader>
                <StackPanel Margin="0,8,0,0">
                    <StackPanel Orientation="Horizontal" Margin="12,8,12,12">
                        <TextBlock Text="Sense" FontSize="22" FontWeight="Bold"/>
                        <TextBlock Text="PC" FontSize="22" FontWeight="Bold" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </NavigationView.PaneHeader>

            <!-- Navigation Items -->
            <NavigationView.MenuItems>
                <NavigationViewItem x:Name="NavSensePC" Content="Sense PC" Tag="SensePC">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7F4;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                
                <NavigationViewItem x:Name="NavStorage" Content="Sense Cloud" Tag="Storage">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xEDA2;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                
                <NavigationViewItem x:Name="NavUsers" Content="Users" Tag="Users">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE716;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                
                <NavigationViewItem x:Name="NavBilling" Content="Billing" Tag="Billing">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE8C7;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                
                <NavigationViewItemSeparator/>
                
                <NavigationViewItem x:Name="NavSupport" Content="Support" Tag="Support">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE946;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                
                <NavigationViewItem x:Name="NavTutorials" Content="Tutorials" Tag="Tutorials">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7BE;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                
                <NavigationViewItem x:Name="NavSecurity" Content="Security &amp; Privacy" Tag="Security">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE72E;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <!-- Footer Items -->
            <NavigationView.FooterMenuItems>
                <NavigationViewItem x:Name="NavNotifications" Content="Notifications" Tag="Notifications">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xEA8F;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                
                <NavigationViewItem x:Name="NavProfile" Tag="Profile">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE77B;"/>
                    </NavigationViewItem.Icon>
                    <NavigationViewItem.Content>
                        <TextBlock x:Name="SidebarUserName" Text="Profile"/>
                    </NavigationViewItem.Content>
                </NavigationViewItem>
                
                <NavigationViewItemSeparator/>
                
                <NavigationViewItem x:Name="LogoutItem" Tag="Logout">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7E8;" Foreground="#EF4444"/>
                    </NavigationViewItem.Icon>
                    <NavigationViewItem.Content>
                        <TextBlock Text="Sign out" Foreground="#EF4444"/>
                    </NavigationViewItem.Content>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>

            <!-- Balance Card in PaneFooter (no hover effect) -->
            <NavigationView.PaneFooter>
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="6" 
                        Padding="14,12"
                        Margin="12,8,12,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <FontIcon Grid.Column="0" Glyph="&#xE8EC;" FontSize="20" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" Margin="0,0,14,0"/>
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Balance" FontSize="11" Opacity="0.6"/>
                            <TextBlock x:Name="SidebarBalanceText" Text="$0.00" FontWeight="SemiBold" FontSize="18"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </NavigationView.PaneFooter>

            <!-- Content Frame -->
            <Frame x:Name="DashboardFrame" Padding="24"/>
            
        </NavigationView>
    </Grid>
</Window>
