<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SensePC.Desktop.WinUI.Views.SensePCPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Transparent">

    <ScrollViewer>
        <StackPanel Padding="32,24" Spacing="24">
            
            <!-- Header Row: Title + Build Button -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Title and Subtitle -->
                <StackPanel Grid.Column="0" Spacing="4">
                    <TextBlock Text="Sense PCs" 
                               FontSize="28" 
                               FontWeight="SemiBold"/>
                    <TextBlock Text="Manage your Cloud Computer" 
                               FontSize="14"
                               Opacity="0.7"/>
                </StackPanel>
                
                <!-- Build Sense PC Button -->
                <Button Grid.Column="1" 
                        Click="BuildNew_Click" 
                        Style="{StaticResource AccentButtonStyle}"
                        CornerRadius="6" 
                        Padding="20,10">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE710;" FontSize="14"/>
                        <TextBlock Text="Build Sense PC" FontWeight="SemiBold"/>
                    </StackPanel>
                </Button>
            </Grid>
            
            <!-- Toolbar: Search and View Options -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Search Box using AutoSuggestBox -->
                <AutoSuggestBox x:Name="SearchBox"
                                Grid.Column="0"
                                PlaceholderText="Search PCs..."
                                QueryIcon="Find"
                                Width="280"
                                Height="30"
                                HorizontalAlignment="Left"
                                TextChanged="SearchBox_TextChanged"/>
                
                <!-- View Mode and Refresh Buttons -->
                <CommandBar Grid.Column="1" 
                            DefaultLabelPosition="Collapsed"
                            Background="Transparent"
                            IsOpen="False">
                    <AppBarButton x:Name="GridViewBtn" 
                                  Icon="ViewAll" 
                                  Label="Grid View"
                                  Click="GridView_Click"/>
                    <AppBarButton x:Name="ListViewBtn" 
                                  Icon="List" 
                                  Label="List View"
                                  Click="ListView_Click"/>
                    <AppBarSeparator/>
                    <AppBarButton x:Name="RefreshBtn" 
                                  Icon="Refresh" 
                                  Label="Refresh"
                                  Click="Refresh_Click"/>
                </CommandBar>
            </Grid>
            
            <!-- Content Area -->
            <Grid MinHeight="400">
                <!-- Loading State -->
                <StackPanel x:Name="LoadingState" 
                            Visibility="Collapsed" 
                            VerticalAlignment="Center" 
                            HorizontalAlignment="Center"
                            Spacing="16">
                    <ProgressRing IsActive="True" Width="48" Height="48"/>
                    <TextBlock Text="Loading your PCs..." 
                               FontSize="14"
                               Opacity="0.7"/>
                </StackPanel>

                <!-- Empty State -->
                <Border x:Name="EmptyState" 
                        Visibility="Collapsed" 
                        CornerRadius="8"
                        Padding="64"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                    <StackPanel HorizontalAlignment="Center" MaxWidth="400" Spacing="16">
                        <FontIcon Glyph="&#xE7F4;" FontSize="64" 
                                  Opacity="0.4"/>
                        <TextBlock Text="No PCs Found" 
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="You don't have any cloud PCs yet. Build your first one to get started!" 
                                   FontSize="14"
                                   Opacity="0.7"
                                   TextAlignment="Center"
                                   TextWrapping="Wrap"
                                   HorizontalAlignment="Center"/>
                        <Button Click="BuildNew_Click" 
                                Style="{StaticResource AccentButtonStyle}"
                                CornerRadius="6" 
                                Padding="24,12" 
                                HorizontalAlignment="Center"
                                Margin="0,8,0,0">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE710;" FontSize="14"/>
                                <TextBlock Text="Build Sense PC" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- PC Cards Container -->
                <StackPanel x:Name="PCCardsPanel" Spacing="12" Visibility="Visible"/>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</Page>
