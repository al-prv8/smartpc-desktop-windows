<Page
    x:Class="SensePC.Desktop.WinUI.Views.LoginPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SensePC.Desktop.WinUI.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Left Side - Branding Area with Theme-Aware Colors -->
        <Grid Grid.Column="0" Background="{ThemeResource LayerFillColorAltBrush}">
            <!-- Branding Content -->
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="60" MaxWidth="420">
                <!-- Logo and Title -->
                <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                    <Border Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="12" Padding="10">
                        <FontIcon Glyph="&#xE7F4;" FontSize="24" Foreground="White"/>
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock FontSize="28" FontWeight="Bold">
                            <Run Text="Sense"/><Run Text="PC" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
                
                <!-- Headline -->
                <TextBlock Text="High Performance Cloud PCs" 
                           FontSize="36" 
                           FontWeight="Bold"
                           TextWrapping="Wrap"
                           LineHeight="44"
                           Margin="0,16,0,0"/>
                
                <TextBlock Text="Deploy powerful virtual machines in seconds. Game, work, and create without hardware limitations." 
                           FontSize="15"
                           Opacity="0.7"
                           Margin="0,16,0,0"
                           TextWrapping="Wrap"
                           LineHeight="24"/>
                
                <!-- Stats Row -->
                <Grid Margin="0,40,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="99.9%" FontSize="28" FontWeight="Bold" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                        <TextBlock Text="Uptime" FontSize="12" Opacity="0.5" Margin="0,4,0,0"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="&lt;50ms" FontSize="28" FontWeight="Bold" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                        <TextBlock Text="Latency" FontSize="12" Opacity="0.5" Margin="0,4,0,0"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="10K+" FontSize="28" FontWeight="Bold" Foreground="{ThemeResource AccentTextFillColorSecondaryBrush}"/>
                        <TextBlock Text="Users" FontSize="12" Opacity="0.5" Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>
                
                <!-- Feature List -->
                <StackPanel Margin="0,40,0,0" Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Border Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="20" Width="32" Height="32" Opacity="0.15">
                            <FontIcon Glyph="&#xE73E;" FontSize="14" Foreground="{ThemeResource AccentFillColorDefaultBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Instant deployment in under 60 seconds" Opacity="0.8" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Border Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="20" Width="32" Height="32" Opacity="0.15">
                            <FontIcon Glyph="&#xE73E;" FontSize="14" Foreground="{ThemeResource AccentFillColorDefaultBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Connect from any device, anywhere" Opacity="0.8" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Border Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="20" Width="32" Height="32" Opacity="0.15">
                            <FontIcon Glyph="&#xE73E;" FontSize="14" Foreground="{ThemeResource AccentFillColorDefaultBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Pay only for what you use" Opacity="0.8" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Grid>

        <!-- Right Side - Login Form -->
        <Border Grid.Column="1" 
                Width="450"
                Padding="48">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel VerticalAlignment="Center">
                    
                    <!-- Welcome Text -->
                    <TextBlock Text="Welcome back" 
                               FontSize="32" 
                               FontWeight="SemiBold"/>
                    <TextBlock Text="Sign in to access your Sense PC" 
                               FontSize="14"
                               Opacity="0.7"
                               Margin="0,8,0,40"/>

                    <!-- Email Field -->
                    <TextBlock Text="Email" 
                               FontSize="13"
                               FontWeight="Medium"
                               Margin="0,0,0,8"/>
                    <TextBox x:Name="EmailBox"
                             PlaceholderText="Enter your email"
                             Text="{x:Bind ViewModel.Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             CornerRadius="6"
                             Padding="14,12"/>

                    <!-- Password Field -->
                    <TextBlock Text="Password" 
                               FontSize="13"
                               FontWeight="Medium"
                               Margin="0,24,0,8"/>
                    <PasswordBox x:Name="PasswordBox"
                                 PlaceholderText="Enter your password"
                                 Password="{x:Bind ViewModel.Password, Mode=TwoWay}"
                                 CornerRadius="6"
                                 Padding="14,12"/>

                    <!-- Error Message -->
                    <TextBlock Text="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                               Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                               FontSize="12"
                               TextWrapping="Wrap"
                               Margin="0,16,0,0"
                               Visibility="{x:Bind ViewModel.ErrorMessage, Converter={StaticResource StringToVisibilityConverter}, Mode=OneWay}"/>

                    <!-- Forgot Password -->
                    <HyperlinkButton Content="Forgot your password?" 
                                     Click="ForgotPassword_Click"
                                     HorizontalAlignment="Right"
                                     Margin="0,16,0,0"
                                     Padding="0"/>

                    <!-- Login Button -->
                    <Button x:Name="LoginButton"
                            Content="{x:Bind ViewModel.IsBusy, Converter={StaticResource BusyToTextConverter}, Mode=OneWay}"
                            Command="{x:Bind ViewModel.SignInCommand}"
                            Style="{StaticResource AccentButtonStyle}"
                            HorizontalAlignment="Stretch"
                            Margin="0,24,0,0"
                            Padding="16"
                            CornerRadius="6"/>

                    <!-- Divider -->
                    <Grid Margin="0,32,0,32">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Rectangle Grid.Column="0" Height="1" Fill="{ThemeResource DividerStrokeColorDefaultBrush}" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" Text="or continue with" Opacity="0.6" FontSize="12" Margin="16,0"/>
                        <Rectangle Grid.Column="2" Height="1" Fill="{ThemeResource DividerStrokeColorDefaultBrush}" VerticalAlignment="Center"/>
                    </Grid>

                    <!-- Social Login -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="12"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button x:Name="GoogleLoginButton" 
                                Grid.Column="0" 
                                HorizontalAlignment="Stretch"
                                Padding="14"
                                CornerRadius="6"
                                Click="GoogleLogin_Click">
                            <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                <!-- Google G Icon using Path -->
                                <Viewbox Width="16" Height="16" VerticalAlignment="Center">
                                    <PathIcon Data="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/>
                                </Viewbox>
                                <TextBlock x:Name="GoogleButtonText" Text="Google" FontWeight="Medium" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="AppleLoginButton"
                                Grid.Column="2" 
                                HorizontalAlignment="Stretch"
                                Padding="14"
                                CornerRadius="6"
                                Click="AppleLogin_Click">
                            <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                <!-- Apple Icon using Path -->
                                <Viewbox Width="16" Height="16" VerticalAlignment="Center">
                                    <PathIcon Data="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                                </Viewbox>
                                <TextBlock x:Name="AppleButtonText" Text="Apple" FontWeight="Medium" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Grid>

                    <!-- Sign Up Link -->
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Center" 
                                Margin="0,40,0,0">
                        <TextBlock Text="Don't have an account?" 
                                   Opacity="0.6"
                                   FontSize="13"/>
                        <HyperlinkButton Content="Sign up" 
                                         Click="SignUp_Click"
                                         FontSize="13"
                                         Padding="4,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- MFA Dialog -->
        <ContentDialog 
            x:Name="MfaDialog"
            Title="Two-Factor Authentication"
            PrimaryButtonText="Verify"
            SecondaryButtonText="Cancel"
            PrimaryButtonCommand="{x:Bind ViewModel.ConfirmMfaCommand}"
            SecondaryButtonCommand="{x:Bind ViewModel.CancelMfaCommand}">
            <StackPanel Spacing="16" Padding="8" MinWidth="320">
                <TextBlock 
                    Text="{x:Bind ViewModel.MfaType, Mode=OneWay, Converter={StaticResource MfaTypeToMessageConverter}}"
                    TextWrapping="Wrap"/>
                <TextBox 
                    PlaceholderText="Enter 6-digit code"
                    Text="{x:Bind ViewModel.MfaCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    MaxLength="6"
                    FontSize="24"
                    FontWeight="SemiBold"
                    TextAlignment="Center"
                    CornerRadius="6"
                    Padding="12"/>
            </StackPanel>
        </ContentDialog>
    </Grid>
</Page>
